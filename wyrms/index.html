<html>
  <head>
    <title>deep sea wyrms</title>
  </head>
  <link rel="shortcut icon" href="favicon.ico">
  <style type="text/css">
    body {
      margin: 0;
      padding: 0;
      background-color: #001328;
    }
  </style>
  <body>
    <canvas id="canvas"></canvas>
    <script type="text/javascript" src="lodash.min.js"></script>
    <script type="text/javascript" src="wyrms.js"></script>
    <script type="text/javascript">
      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");

      var tileSize = 8;
      var width = (window.innerWidth / tileSize) | 0;
      var height = (window.innerHeight / tileSize) | 0;
      var grid = new Grid(ctx, width, height, tileSize);
      canvas.onclick = grid.handleClick.bind(grid);

      var lastTime = null;
      var fps = 16
      var interval = 1000 / fps;

      function update(time) {
        requestAnimationFrame(update);

        if (lastTime === null) {
          lastTime = time;
          grid.draw();
          return;
        }

        var delta = time - lastTime;
        if (delta >= interval) {
          lastTime = time;
          grid.update();
          grid.draw();
        }
      }

      requestAnimationFrame(update);
    </script>
  </body>
</html>
